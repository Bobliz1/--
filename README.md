# 小市值策略分享
def initialize(context):
    log.info('初始函数开始运行且全局只运行一次')
    
    大盘：沪深300
    
    run_daily
1. 盘前集合竞价：9:15-9:25
2. 开盘连续竞价：9:30-11:30
3. 午间休市：11:30-13:00
4. 下午连续竞价：13:00-14:57
5. 收盘集合竞价：14:57-15:00
6. 盘后固定价格交易：15:00-15:30（科创板、创业板）
# 小市值策略内容

每日：

开盘前：过滤停牌股票后，获得市值百分之五到百分之十的前十位股票。

开盘时：在非调仓日，根据清仓信号添加清仓股票栏，清出清仓股票栏中的股票；在调仓日：先清出清仓股票栏中的股票后，再将股票数量补充至10只。

开盘后：更新最大净值的点，便于在下一个交易日计算清仓信号。
# 251210更新

原先逻辑：根据调仓日进行调仓，但是由于清仓无法立刻清除完毕，导致调仓会收到影响，进而影响最大回撤信号，进而循环影响下一次清仓。

现有逻辑：由事件驱动，引入全局变量flag，当flag=清仓，则只进行清仓，直到仓位空了为止，并使flag=正常。当flag=正常时，若手里没有投资组合，按策略购入新的组合，并记录新的最大净值。若手里有投资组合，则先持有。当手里的投资组合达到设定的最大回撤时，则使得flag=清仓，并进入清仓模式。
